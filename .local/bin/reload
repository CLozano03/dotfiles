#!/bin/sh

function notification_reload(){
    notify-send -t 2500 "$1"
}

LOCK_FILE="$HOME/.cache/reload.lock"
if [ -f $LOCK_FILE ]; then exit 0; fi

touch $LOCK_FILE


# Kill processes to be restarted
_ps=(swaync hypridle)
for _prs in "${_ps[@]}"; do
    if pidof "${_prs}" >/dev/null; then
        pkill "${_prs}"
    fi
done

# Hyprpanel
hyprpanel -q > /dev/null 2>&1; hyprpanel &

# Hypr
hyprctl reload  && notification_reload "Hypr reload"
hypridle &


rm $LOCK_FILE
